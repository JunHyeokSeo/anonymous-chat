# 요구사항 정의서 (SRS) - 익명 1:1 채팅 앱 백엔드

## 1. 프로젝트 개요

| 항목 | 내용 |
|------|------|
| 프로젝트명 | 익명 1:1 채팅 앱 백엔드 |
| 목적 | 사용자 간 익명 기반의 1:1 채팅 기능을 제공하는 서버를 구축한다. 초기 버전은 핵심 기능만 구현하되, 추후 인앱 결제 등 확장을 고려한 설계로 진행한다. |
| 사용 기술 | Java 17, Spring Boot 3, Spring Data JPA, Spring Security, OAuth2, JWT, MySQL, Gradle |

## 2. 주요 대상 사용자

- 가입된 일반 사용자
    - 익명으로 다른 사용자와 채팅할 수 있는 개인
    - 자신의 프로필을 작성하고 다른 사용자 목록을 조회 및 채팅 가능
- 관리자 (관리 기능은 향후 확장 예정)
    - 현재 버전에는 미포함

## 3. 핵심 도메인 및 엔티티

- User, UserProfileImage, ChatRoom, Message, Block

## 4. 시스템 아키텍처 개요

- 클라이언트: iOS/Android 앱 (프론트엔드는 외부)
- 백엔드 서버: REST API 제공, JWT 인증, OAuth2 로그인 지원
- DB: MySQL
- 인증: Google/Apple OAuth2, JWT 기반 토큰 인증 (Access + Refresh)

## 5. 핵심 기능 정의

### 1) 회원가입 및 인증
- OAuth2 로그인 (Google, Apple)
- JWT 발급 (Access, Refresh)
- 최초 로그인 시 사용자 정보 입력 (닉네임, 성별, 나이, 지역, 자기소개, 프로필 이미지)

### 2) 프로필 관리
- 프로필 조회, 수정
- 프로필 이미지 업로드, 삭제, 대표 이미지 설정
- 이미지 soft-delete 관리

### 3) 유저 검색
- 성별, 나이, 지역 조건 기반 필터링
- 차단된 유저는 결과에서 제외

### 4) 채팅 기능
- 1:1 채팅방 생성
- 메시지 전송 및 저장
- 채팅방에서 한 명이 나가면 상대에게 “상대방이 나갔습니다” 표시
- 양쪽 모두 나가면 채팅방 soft-delete 처리

### 5) 차단 기능
- 특정 사용자 차단
- 차단된 사용자와 채팅 불가
- 차단 해제 기능 (soft delete 방식)

## 6. 비기능 요구사항

| 항목 | 내용 |
|------|------|
| 보안 | JWT + OAuth2 인증 기반, 비밀번호 미사용, 토큰 탈취 방지 |
| 문서화 | Swagger or Spring REST Docs |
| 테스트 | 단위 테스트 (JUnit5 + Mockito), 통합 테스트는 선택적 |
| 예외처리 | GlobalExceptionHandler + 커스텀 예외 코드 체계 |
| 응답 포맷 | 공통 Response DTO 사용 (`code`, `message`, `data`) |
| 성능 | 조회/검색 쿼리 최적화, LAZY 전략 기본 적용 |
| 확장성 | 서비스 계층 분리, DDD-lite 구조 사용 (domain, application, interface, infra) |

## 7. 제한 사항

- 익명 채팅 구조로 실명/전화번호는 저장하지 않음
- 인증은 OAuth2에 의존 (구현 초기에는 이메일/비밀번호 미지원)
- 1:1 채팅만 가능 (그룹 채팅 미지원)
- 포인트/인앱 결제 기능은 현재 제외 (후속 버전에서 도입 예정)

## 8. 향후 고려 사항

- 알림 기능 (Push, WebSocket 등)
- 관리자 페이지 및 제재 기능
- 유저 활동 로그, 메시지 신고
- 메시지 읽음 처리 및 수신확인
- 인앱 포인트, 결제 연동