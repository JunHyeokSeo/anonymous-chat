# 도메인별 상세 기능 목록

## 1. 인증 (Auth)
- **OAuth2 로그인**: Google, Naver, Kakao를 통한 소셜 로그인 및 신규 사용자(Guest) 생성.
- **토큰 발급**: 인증된 사용자에게 JWT (Access Token, Refresh Token)를 발급.
- **토큰 재발급**: Refresh Token을 사용하여 만료된 Access Token을 재발급.
- **로그아웃**: Refresh Token을 무효화하고 Access Token을 블랙리스트에 추가하여 즉시 사용을 중지시킴.
- **임시 토큰 관리**: OAuth2 콜백 과정에서 사용할 일회성 임시 코드를 발급하고 소비.

## 2. 사용자 (User)
- **회원가입**: Guest 권한의 사용자가 닉네임, 프로필 등을 등록하여 User 권한으로 전환.
- **내 프로필 조회**: 현재 로그인된 사용자의 상세 프로필 정보(이미지 포함)를 조회.
- **타인 프로필 조회**: 특정 사용자 ID를 통해 해당 사용자의 프로필 정보를 조회.
- **프로필 수정**: 닉네임, 자기소개, 나이, 성별, 지역 및 프로필 이미지를 수정.
- **회원 탈퇴**: 사용자 계정을 비활성(soft-delete) 상태로 전환.
- **사용자 검색**: 조건(성별, 나이, 지역)에 맞는 사용자 목록을 페이징(Slice)하여 조회. 차단한 사용자는 결과에서 제외.

## 3. 차단 (Block)
- **사용자 차단**: 특정 사용자를 차단 목록에 추가. 차단된 사용자는 검색 결과에 노출되지 않으며, 채팅방 생성이 제한됨.
- **사용자 차단 해제**: 차단 목록에서 특정 사용자를 제거.
- **차단 목록 조회**: 현재 사용자가 차단한 모든 사용자의 ID 목록을 내부적으로 조회하여 검색 등에서 활용.

## 4. 채팅방 (ChatRoom)
- **채팅방 생성/조회**: 두 사용자 간의 채팅방을 생성. 이미 활성 상태의 채팅방이 존재하면 신규 생성 대신 해당 채팅방 ID를 반환.
- **채팅방 목록 조회**: 현재 사용자가 참여하고 있는 모든 활성 채팅방의 목록을 조회. (상대방 정보, 마지막 메시지, 안 읽은 메시지 수 포함)
- **채팅방 나가기**: 채팅방에서 사용자가 나감을 표시. 양쪽 모두 나가면 채팅방은 비활성화됨.
- **채팅방 재입장/활성화**: 나갔던 사용자가 다시 메시지를 보내면 자동으로 재입장 처리되고, 비활성화된 채팅방은 다시 활성화됨.

## 5. 메시지 (Message)
- **메시지 전송 (WebSocket)**: WebSocket을 통해 특정 채팅방으로 텍스트 메시지를 전송.
- **메시지 브로드캐스트 (WebSocket)**: 전송된 메시지를 해당 채팅방에 접속해 있는 모든 참여자에게 실시간으로 전달.
- **메시지 저장**: 전송된 메시지를 데이터베이스에 영속화.
- **이전 메시지 조회 (REST API)**: 특정 채팅방의 이전 대화 내용을 커서 기반 페이징으로 조회.
- **메시지 읽음 처리 (REST API & WebSocket)**: 특정 채팅방의 메시지를 읽음 상태로 업데이트하고, 이 사실을 상대방에게 실시간으로 알림.
- **상대방 마지막 읽음 확인 (REST API)**: 채팅방에서 상대방이 마지막으로 읽은 메시지의 ID를 조회.
- **푸시 알림**: 상대방이 오프라인일 때 메시지가 수신되면 FCM 등을 통해 푸시 알림을 보낼 수 있도록 관련 이벤트를 발행.